<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ProdBoard</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">üé¨</div>
        <div>
          <div class="brandTitle">ProdBoard</div>
          <div class="brandSub">Mini StudioBinder (pero sin el sablazo)</div>
        </div>
      </div>

      <nav class="nav">
        <button class="navBtn active" data-view="breakdown">Breakdown</button>
        <button class="navBtn" data-view="shooting">Plan de rodaje</button>
        <button class="navBtn" data-view="elements">Elementos</button>
        <button class="navBtn" data-view="crew">Equipo t√©cnico</button>
        <button class="navBtn" data-view="schedule">Cronograma</button>
<button class="navBtn" data-view="payments">Pagos</button>
<button class="navBtn" data-view="reports">Reportes</button>
<button class="navBtn" data-view="callsheet">Call Sheets</button>
<button class="navBtn" data-view="settings">Sync / Ajustes</button>

      </nav>

      <div class="sidebarFooter">
        <div class="kv">
          <div class="k">Estado</div>
          <div class="v" id="statusText">Cargando‚Ä¶</div>
        </div>
        <div class="kv">
          <div class="k">√öltimo guardado</div>
          <div class="v" id="savedAtText">‚Äî</div>
        </div>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="topbarLeft">
          <input id="projectTitle" class="titleInput" placeholder="Nombre del proyecto" />
          <span class="pill" id="syncPill">Local</span>
        </div>
        <div class="topbarRight">
          <button class="btn" id="btnPull">Traer (Pull)</button>
          <button class="btn primary" id="btnPush">Enviar (Push)</button>
        </div>
      </header>

      <!-- BREAKDOWN -->
      <section class="view" id="view-breakdown">
        <div class="grid2">
          <div class="card">
            <div class="cardHeader">
              <h2>Escenas</h2>
              <div class="row gap">
                <button class="btn" id="btnAddScene">+ Escena</button>
                <button class="btn" id="btnDuplicateScene">Duplicar</button>
                <button class="btn danger" id="btnDeleteScene">Borrar</button>
              </div>
            </div>

            <div class="filters">
              <input id="sceneSearch" class="input" placeholder="Buscar (nro, slugline, loc, resumen)..." />
              <select id="sceneFilterTOD" class="input">
                <option value="">Horario (todos)</option>
                <option value="D√≠a">D√≠a</option>
                <option value="Noche">Noche</option>
                <option value="Atardecer">Atardecer</option>
                <option value="Amanecer">Amanecer</option>
              </select>
            </div>

            <div class="tableWrap">
              <table class="table" id="sceneTable">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Slugline</th>
                    <th>Locaci√≥n</th>
                    <th>Horario</th>
                    <th>P√°g</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

<details class="importBox">
  <summary>Importar guion (texto) y detectar escenas</summary>
  <p class="muted">
    Peg√° el guion. Se detectan escenas por encabezados tipo <code>INT.</code> / <code>EXT.</code> / <code>INT/EXT</code>.
    Si tu formato es raro, pod√©s agregar keywords.
  </p>

  <div class="filters">
    <input id="scriptKeywords" class="input" placeholder="Keywords extra (separadas por coma). Ej: ESCENA, SCENE" />
  </div>

  <textarea id="scriptImportText" class="textarea" rows="10" placeholder="INT. CASA - NOCHE
Lucio entra...
..."></textarea>

  <div class="row gap">
    <button class="btn" id="btnParseScript">Detectar escenas y cargar</button>
    <button class="btn danger" id="btnClearScript">Limpiar</button>
  </div>

  <p class="muted">Tip: esto NO borra tus escenas existentes, agrega nuevas. Si quer√©s reemplazar, borr√°s escenas y reimport√°s.</p>
</details>
          </div>

          <div class="card">
            <div class="cardHeader">
              <h2>Detalle de escena</h2>
              <div class="row gap">
                <span class="muted" id="selectedSceneHint">Seleccion√° una escena</span>
              </div>
            </div>

            <div class="formGrid">
              <label class="field">
                <span>N√∫mero</span>
                <input id="scene_number" class="input" />
              </label>
              <label class="field">
                <span>Locaci√≥n</span>
                <input id="scene_location" class="input" />
              </label>
              <label class="field col2">
                <span>Slugline</span>
                <input id="scene_slugline" class="input" />
              </label>
              <label class="field">
                <span>Horario</span>
                <select id="scene_timeOfDay" class="input">
                  <option value="">‚Äî</option>
                  <option value="D√≠a">D√≠a</option>
                  <option value="Noche">Noche</option>
                  <option value="Atardecer">Atardecer</option>
                  <option value="Amanecer">Amanecer</option>
                </select>
              </label>
              <label class="field">
                <span>P√°ginas</span>
                <input id="scene_pages" class="input" type="number" step="0.1" />
              </label>
              <label class="field col2">
                <span>Resumen</span>
                <textarea id="scene_summary" class="textarea" rows="3"></textarea>
              </label>
              <label class="field col2">
                <span>Notas</span>
                <textarea id="scene_notes" class="textarea" rows="4"></textarea>
              </label>
            </div>

            <div class="hr"></div>

            <div class="cardSubHeader">
              <h3>Elementos del breakdown (por escena)</h3>
              <div class="row gap">
                <select id="elCategory" class="input">
                  <option value="cast">Cast</option>
                  <option value="props">Props</option>
                  <option value="wardrobe">Vestuario</option>
                  <option value="makeup">Maquillaje</option>
                  <option value="sfx">SFX</option>
                  <option value="vfx">VFX</option>
                  <option value="vehicles">Veh√≠culos</option>
                  <option value="animals">Animales</option>
                  <option value="extras">Extras</option>
                  <option value="art">Arte</option>
                  <option value="sound">Sonido</option>
                </select>
                <input id="elItem" class="input" placeholder="Agregar elemento‚Ä¶" />
                <button class="btn" id="btnAddSceneElement">Agregar</button>
              </div>
            </div>

            <div id="sceneElementsChips" class="chips"></div>
          </div>
        </div>
      </section>

      <!-- SHOOTING -->
<section class="view hidden" id="view-shooting">
  <div class="boardWrap">
    <div class="card sceneBank">
      <div class="cardHeader">
        <h2>Scene Bank</h2>
        <div class="row gap">
          <button class="btn" id="btnAddShootDay">+ D√≠a</button>
        </div>
      </div>

      <div class="filters">
        <input id="bankSearch" class="input" placeholder="Buscar escena‚Ä¶" />
        <select id="bankFilter" class="input">
          <option value="all">Todas</option>
          <option value="unassigned">No asignadas</option>
        </select>
      </div>

      <div id="sceneBankList" class="list"></div>
      <p class="muted">Arrastr√° escenas a un d√≠a. Tambi√©n pod√©s mover entre d√≠as y reordenar.</p>
    </div>

    <div class="card" style="flex:1;">
      <div class="cardHeader">
        <h2>Plan de rodaje</h2>
        <div class="row gap noPrint">
          <button class="btn" id="btnDeleteShootDay">Borrar d√≠a</button>
        </div>
      </div>

      <div class="daysBoard" id="daysBoard"></div>

      <div class="hr"></div>

      <div class="dayDetailGrid">
        <div class="cardSubHeader">
          <h3>Detalle del d√≠a</h3>
          <div class="row gap noPrint">
            <button class="btn" id="btnOpenCallSheet">Generar Call Sheet</button>
          </div>
        </div>

        <div class="pairs">
          <label class="field">
            <span>Fecha</span>
            <input id="day_date" class="input" type="date" />
          </label>
          <label class="field">
            <span>Call time</span>
            <input id="day_call" class="input" type="time" />
          </label>
          <label class="field">
            <span>Locaci√≥n</span>
            <input id="day_location" class="input" />
          </label>
          <label class="field">
            <span>Nombre del d√≠a (opcional)</span>
            <input id="day_label" class="input" placeholder="Ej: D√≠a 3 - Casa" />
          </label>
        </div>

        <label class="field">
          <span>Notas</span>
          <textarea id="day_notes" class="textarea" rows="3"></textarea>
        </label>

        <div class="hr"></div>

        <div class="grid2" style="grid-template-columns:1fr 1fr;">
          <div>
            <h3 class="h3">Personas citadas</h3>
            <div class="muted">Cast (auto por breakdown):</div>
            <div id="dayCast" class="chips" style="margin:8px 0 12px;"></div>

            <div class="muted">Equipo t√©cnico (seleccion√° qui√©n va):</div>
            <div id="dayCrewPicker" class="list" style="margin-top:8px;"></div>
          </div>

          <div>
            <h3 class="h3">Necesidades por √°rea</h3>
            <div id="dayNeeds" class="list"></div>

            <div class="hr"></div>

            <h3 class="h3">Cronograma que cae este d√≠a</h3>
            <div id="daySchedule" class="list"></div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>


      <!-- ELEMENTS -->
      <section class="view hidden" id="view-elements">
        <div class="card">
          <div class="cardHeader">
            <h2>Librer√≠a de elementos</h2>
            <div class="row gap">
              <select id="libCategory" class="input">
                <option value="cast">Cast</option>
                <option value="props">Props</option>
                <option value="wardrobe">Vestuario</option>
                <option value="makeup">Maquillaje</option>
                <option value="sfx">SFX</option>
                <option value="vfx">VFX</option>
                <option value="vehicles">Veh√≠culos</option>
                <option value="animals">Animales</option>
                <option value="extras">Extras</option>
                <option value="art">Arte</option>
                <option value="sound">Sonido</option>
              </select>
              <input id="libItem" class="input" placeholder="Nuevo √≠tem‚Ä¶" />
              <button class="btn" id="btnAddLibItem">Agregar</button>
            </div>
          </div>

          <div class="grid2">
            <div>
              <h3 class="h3">Items</h3>
              <div id="libItems" class="chips"></div>
            </div>
            <div>
              <h3 class="h3">D√≥nde aparece</h3>
              <p class="muted">Seleccion√° un item para ver escenas.</p>
              <div id="libUsage" class="list"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- CREW -->
      <section class="view hidden" id="view-crew">
        <div class="card">
          <div class="cardHeader">
            <h2>Equipo t√©cnico</h2>
            <button class="btn" id="btnAddCrew">+ Integrante</button>
          </div>

          <div class="tableWrap">
            <table class="table" id="crewTable">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Rol</th>
                  <th>Tel</th>
                  <th>Email</th>
                  <th>Notas</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- SCHEDULE -->
      <section class="view hidden" id="view-schedule">
        <div class="card">
          <div class="cardHeader">
            <h2>Cronograma</h2>
            <button class="btn" id="btnAddSchedule">+ √çtem</button>
          </div>

          <div class="tableWrap">
            <table class="table" id="scheduleTable">
              <thead>
                <tr>
                  <th>√çtem</th>
                  <th>Inicio</th>
                  <th>Fin</th>
                  <th>Responsable</th>
                  <th>Estado</th>
                  <th>Notas</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- PAYMENTS -->
      <section class="view hidden" id="view-payments">
        <div class="card">
          <div class="cardHeader">
            <h2>Pagos / Comprobantes</h2>
            <button class="btn" id="btnAddPayment">+ Pago</button>
          </div>

          <div class="statsRow">
            <div class="stat">
              <div class="statK">Pendiente</div>
              <div class="statV" id="statPending">‚Äî</div>
            </div>
            <div class="stat">
              <div class="statK">Pagado</div>
              <div class="statV" id="statPaid">‚Äî</div>
            </div>
            <div class="stat">
              <div class="statK">Total</div>
              <div class="statV" id="statTotal">‚Äî</div>
            </div>
          </div>

          <div class="tableWrap">
            <table class="table" id="paymentsTable">
              <thead>
                <tr>
                  <th>Proveedor</th>
                  <th>Concepto</th>
                  <th>Monto</th>
                  <th>Vence</th>
                  <th>Estado</th>
                  <th>Comprobante (link)</th>
                  <th>Notas</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- SETTINGS -->

<section class="view hidden" id="view-reports">
  <div class="card">
    <div class="cardHeader">
      <h2>Reportes por d√≠a</h2>
      <div class="row gap">
        <button class="btn" id="btnRefreshReports">Actualizar</button>
      </div>
    </div>
    <div id="reportsList" class="list"></div>
  </div>
</section>

<section class="view hidden" id="view-callsheet">
  <div class="card">
    <div class="cardHeader">
      <h2>Call Sheet</h2>
      <div class="row gap noPrint">
        <button class="btn" id="btnPrintCallSheet">Imprimir</button>
      </div>
    </div>
    <div id="callSheetWrap"></div>
  </div>
</section>


      <section class="view hidden" id="view-settings">
        <div class="grid2">
          <div class="card">
            <div class="cardHeader">
              <h2>JSONBin (editar desde cualquier lado)</h2>
            </div>

            <div class="formGrid">
              <label class="field col2">
                <span>BIN ID</span>
                <input id="cfg_binId" class="input" placeholder="Ej: 65a1b2c3d4e5f6..." />
              </label>
              <label class="field col2">
                <span>Access Key (recomendado) o Master Key</span>
                <input id="cfg_accessKey" class="input" placeholder="Peg√° tu key ac√° (se guarda en este navegador)" />
              </label>

              <label class="field col2">
                <span>Autosync</span>
                <select id="cfg_autosync" class="input">
                  <option value="on">On</option>
                  <option value="off">Off</option>
                </select>
              </label>
            </div>

            <div class="row gap">
              <button class="btn" id="btnSaveCfg">Guardar config</button>
              <button class="btn" id="btnTestCfg">Probar conexi√≥n</button>
            </div>

            <div class="note">
              <b>Nota:</b> en una web est√°tica no hay ‚Äúsecretos perfectos‚Äù.
              Us√° <b>Access Key</b> con permisos acotados (read/update) en vez de Master Key.
            </div>
          </div>

          <div class="card dangerZone">
            <div class="cardHeader">
              <h2>Zona peligrosa</h2>
            </div>

            <p class="muted">
              Reset borra todo el proyecto (local y, si hac√©s push despu√©s, remoto).
              Para evitar accidentes, se pide una clave.
            </p>

            <div class="formGrid">
              <label class="field col2">
                <span>Clave de reset (se guarda en este navegador)</span>
                <input id="cfg_resetKey" class="input" placeholder="Defin√≠ una clave" />
              </label>
              <label class="field col2">
                <span>Confirmar clave</span>
                <input id="cfg_resetKeyConfirm" class="input" placeholder="Repetila" />
              </label>
            </div>

            <div class="row gap">
              <button class="btn" id="btnSetResetKey">Setear clave</button>
              <button class="btn danger" id="btnReset">RESET TOTAL</button>
            </div>

            <div class="note">
              Esto no es ‚Äúseguridad militar‚Äù, es un <i>airbag</i> contra clicks involuntarios.
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast"></div>

  <script src="js/utils.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
